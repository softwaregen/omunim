/*
 * fancyBox - jQuery Plugin
 * version: 2.1.3 (Tue, 23 Oct 2012)
 * @requires jQuery v1.6 or later
 *
 * Examples at http://fancyapps.com/fancybox/
 * License: www.fancyapps.com/fancybox/#license
 *
 * Copyright 2012 Janis Skarnelis - janis@fancyapps.com
 *
 */
(function(o,d,a,m){var n=a(o),b=a(d),e=a.fancybox=function(){e.open.apply(this,arguments)},c=null,l=d.createTouch!==m,i=function(p){return p&&p.hasOwnProperty&&p instanceof a},k=function(p){return p&&a.type(p)==="string"},h=function(p){return k(p)&&p.indexOf("%")>0},j=function(p){return(p&&!(p.style.overflow&&p.style.overflow==="hidden")&&((p.clientWidth&&p.scrollWidth>p.clientWidth)||(p.clientHeight&&p.scrollHeight>p.clientHeight)))},f=function(q,p){var r=parseInt(q,10)||0;if(p&&h(q)){r=e.getViewport()[p]/100*r}return Math.ceil(r)},g=function(q,p){return f(q,p)+"px"};a.extend(e,{version:"2.1.3",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:true,autoHeight:false,autoWidth:false,autoResize:true,autoCenter:!l,fitToView:true,aspectRatio:false,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3000,preload:3,modal:false,loop:true,ajax:{dataType:"html",headers:{"X-fancyBox":true}},iframe:{scrolling:"auto",preload:true},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:true,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(a.browser.msie?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:true,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:true,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:true,title:true},onCancel:a.noop,beforeLoad:a.noop,afterLoad:a.noop,beforeShow:a.noop,afterShow:a.noop,beforeChange:a.noop,beforeClose:a.noop,afterClose:a.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:false,isOpen:false,isOpened:false,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(p,q){if(!p){return}if(!a.isPlainObject(q)){q={}}if(false===e.close(true)){return}if(!a.isArray(p)){p=i(p)?a(p).get():[p]}a.each(p,function(v,s){var w={},t,z,r,A,x,u,y;if(a.type(s)==="object"){if(s.nodeType){s=a(s)}if(i(s)){w={href:s.data("fancybox-href")||s.attr("href"),title:s.data("fancybox-title")||s.attr("title"),isDom:true,element:s};if(a.metadata){a.extend(true,w,s.metadata())}}else{w=s}}t=q.href||w.href||(k(s)?s:null);z=q.title!==m?q.title:w.title||"";r=q.content||w.content;A=r?"html":(q.type||w.type);if(!A&&w.isDom){A=s.data("fancybox-type");if(!A){x=s.prop("class").match(/fancybox\.(\w+)/);A=x?x[1]:null}}if(k(t)){if(!A){if(e.isImage(t)){A="image"}else{if(e.isSWF(t)){A="swf"}else{if(t.charAt(0)==="#"){A="inline"}else{if(k(s)){A="html";r=s}}}}}if(A==="ajax"){u=t.split(/\s+/,2);t=u.shift();y=u.shift()}}if(!r){if(A==="inline"){if(t){r=a(k(t)?t.replace(/.*(?=#[^\s]+$)/,""):t)}else{if(w.isDom){r=s}}}else{if(A==="html"){r=t}else{if(!A&&!t&&w.isDom){A="inline";r=s}}}}a.extend(w,{href:t,type:A,content:r,title:z,selector:y});p[v]=w});e.opts=a.extend(true,{},e.defaults,q);if(q.keys!==m){e.opts.keys=q.keys?a.extend({},e.defaults.keys,q.keys):false}e.group=p;return e._start(e.opts.index)},cancel:function(){var p=e.coming;if(!p||false===e.trigger("onCancel")){return}e.hideLoading();if(e.ajaxLoad){e.ajaxLoad.abort()}e.ajaxLoad=null;if(e.imgPreload){e.imgPreload.onload=e.imgPreload.onerror=null}if(p.wrap){p.wrap.stop(true,true).trigger("onReset").remove()}e.coming=null;if(!e.current){e._afterZoomOut(p)}},close:function(p){e.cancel();if(false===e.trigger("beforeClose")){return}e.unbindEvents();if(!e.isActive){return}if(!e.isOpen||p===true){a(".fancybox-wrap").stop(true).trigger("onReset").remove();e._afterZoomOut()}else{e.isOpen=e.isOpened=false;e.isClosing=true;a(".fancybox-item, .fancybox-nav").remove();e.wrap.stop(true,true).removeClass("fancybox-opened");e.transitions[e.current.closeMethod]()}},play:function(p){var q=function(){clearTimeout(e.player.timer)},r=function(){q();if(e.current&&e.player.isActive){e.player.timer=setTimeout(e.next,e.current.playSpeed)}},t=function(){q();a("body").unbind(".player");e.player.isActive=false;e.trigger("onPlayEnd")},s=function(){if(e.current&&(e.current.loop||e.current.index<e.group.length-1)){e.player.isActive=true;a("body").bind({"afterShow.player onUpdate.player":r,"onCancel.player beforeClose.player":t,"beforeLoad.player":q});r();e.trigger("onPlayStart")}};if(p===true||(!e.player.isActive&&p!==false)){s()}else{t()}},next:function(q){var p=e.current;if(p){if(!k(q)){q=p.direction.next}e.jumpto(p.index+1,q,"next")}},prev:function(q){var p=e.current;if(p){if(!k(q)){q=p.direction.prev}e.jumpto(p.index-1,q,"prev")}},jumpto:function(r,q,s){var p=e.current;if(!p){return}r=f(r);e.direction=q||p.direction[(r>=p.index?"next":"prev")];e.router=s||"jumpto";if(p.loop){if(r<0){r=p.group.length+(r%p.group.length)}r=r%p.group.length}if(p.group[r]!==m){e.cancel();e._start(r)}},reposition:function(q,r){var p=e.current,t=p?p.wrap:null,s;if(t){s=e._getPosition(r);if(q&&q.type==="scroll"){delete s.position;t.stop(true,true).animate(s,200)}else{t.css(s);p.pos=a.extend({},p.dim,s)}}},update:function(q){var r=(q&&q.type),p=!r||r==="orientationchange";if(p){clearTimeout(c);c=null}if(!e.isOpen||c){return}c=setTimeout(function(){var s=e.current;if(!s||e.isClosing){return}e.wrap.removeClass("fancybox-tmp");if(p||r==="load"||(r==="resize"&&s.autoResize)){e._setDimension()}if(!(r==="scroll"&&s.canShrink)){e.reposition(q)}e.trigger("onUpdate");c=null},(p&&!l?0:300))},toggle:function(p){if(e.isOpen){e.current.fitToView=a.type(p)==="boolean"?p:!e.current.fitToView;if(l){e.wrap.removeAttr("style").addClass("fancybox-tmp");e.trigger("onUpdate")}e.update()}},hideLoading:function(){b.unbind(".loading");a("#fancybox-loading").remove()},showLoading:function(){var p,q;e.hideLoading();p=a('<div id="fancybox-loading"><div></div></div>').click(e.cancel).appendTo("body");b.bind("keydown.loading",function(r){if((r.which||r.keyCode)===27){r.preventDefault();e.cancel()}});if(!e.defaults.fixed){q=e.getViewport();p.css({position:"absolute",top:(q.h*0.5)+q.y,left:(q.w*0.5)+q.x})}},getViewport:function(){var p=(e.current&&e.current.locked)||false,q={x:n.scrollLeft(),y:n.scrollTop()};if(p){q.w=p[0].clientWidth;q.h=p[0].clientHeight}else{q.w=l&&o.innerWidth?o.innerWidth:n.width();q.h=l&&o.innerHeight?o.innerHeight:n.height()}return q},unbindEvents:function(){if(e.wrap&&i(e.wrap)){e.wrap.unbind(".fb")}b.unbind(".fb");n.unbind(".fb")},bindEvents:function(){var p=e.current,q;if(!p){return}n.bind("orientationchange.fb"+(l?"":" resize.fb")+(p.autoCenter&&!p.locked?" scroll.fb":""),e.update);q=p.keys;if(q){b.bind("keydown.fb",function(s){var r=s.which||s.keyCode,t=s.target||s.srcElement;if(r===27&&e.coming){return false}if(!s.ctrlKey&&!s.altKey&&!s.shiftKey&&!s.metaKey&&!(t&&(t.type||a(t).is("[contenteditable]")))){a.each(q,function(u,v){if(p.group.length>1&&v[r]!==m){e[u](v[r]);s.preventDefault();return false}if(a.inArray(r,v)>-1){e[u]();s.preventDefault();return false}})}})}if(a.fn.mousewheel&&p.mouseWheel){e.wrap.bind("mousewheel.fb",function(v,s,t,u){var x=v.target||null,w=a(x),r=false;while(w.length){if(r||w.is(".fancybox-skin")||w.is(".fancybox-wrap")){break}r=j(w[0]);w=a(w).parent()}if(s!==0&&!r){if(e.group.length>1&&!p.canShrink){if(u>0||t>0){e.prev(u>0?"down":"left")}else{if(u<0||t<0){e.next(u<0?"up":"right")}}v.preventDefault()}}})}},trigger:function(p,q){var s,r=q||e.coming||e.current;if(!r){return}if(a.isFunction(r[p])){s=r[p].apply(r,Array.prototype.slice.call(arguments,1))}if(s===false){return false}if(r.helpers){a.each(r.helpers,function(t,u){if(u&&e.helpers[t]&&a.isFunction(e.helpers[t][p])){u=a.extend(true,{},e.helpers[t].defaults,u);e.helpers[t][p](u,r)}})}a.event.trigger(p+".fb")},isImage:function(p){return k(p)&&p.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$)/i)},isSWF:function(p){return k(p)&&p.match(/\.(swf)((\?|#).*)?$/i)},_start:function(r){var p={},t,q,v,s,u;r=f(r);t=e.group[r]||null;if(!t){return false}p=a.extend(true,{},e.opts,t);s=p.margin;u=p.padding;if(a.type(s)==="number"){p.margin=[s,s,s,s]}if(a.type(u)==="number"){p.padding=[u,u,u,u]}if(p.modal){a.extend(true,p,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{closeClick:false}}})}if(p.autoSize){p.autoWidth=p.autoHeight=true}if(p.width==="auto"){p.autoWidth=true}if(p.height==="auto"){p.autoHeight=true}p.group=e.group;p.index=r;e.coming=p;if(false===e.trigger("beforeLoad")){e.coming=null;return}v=p.type;q=p.href;if(!v){e.coming=null;if(e.current&&e.router&&e.router!=="jumpto"){e.current.index=r;return e[e.router](e.direction)}return false}e.isActive=true;if(v==="image"||v==="swf"){p.autoHeight=p.autoWidth=false;p.scrolling="visible"}if(v==="image"){p.aspectRatio=true}if(v==="iframe"&&l){p.scrolling="scroll"}p.wrap=a(p.tpl.wrap).addClass("fancybox-"+(l?"mobile":"desktop")+" fancybox-type-"+v+" fancybox-tmp "+p.wrapCSS).appendTo(p.parent||"body");a.extend(p,{skin:a(".fancybox-skin",p.wrap),outer:a(".fancybox-outer",p.wrap),inner:a(".fancybox-inner",p.wrap)});a.each(["Top","Right","Bottom","Left"],function(w,x){p.skin.css("padding"+x,g(p.padding[w]))});e.trigger("onReady");if(v==="inline"||v==="html"){if(!p.content||!p.content.length){return e._error("content")}}else{if(!q){return e._error("href")}}if(v==="image"){e._loadImage()}else{if(v==="ajax"){e._loadAjax()}else{if(v==="iframe"){e._loadIframe()}else{e._afterLoad()}}}},_error:function(p){a.extend(e.coming,{type:"html",autoWidth:true,autoHeight:true,minWidth:0,minHeight:0,scrolling:"no",hasError:p,content:e.coming.tpl.error});e._afterLoad()},_loadImage:function(){var p=e.imgPreload=new Image();p.onload=function(){this.onload=this.onerror=null;e.coming.width=this.width;e.coming.height=this.height;e._afterLoad()};p.onerror=function(){this.onload=this.onerror=null;e._error("image")};p.src=e.coming.href;if(p.complete!==true){e.showLoading()}},_loadAjax:function(){var p=e.coming;e.showLoading();e.ajaxLoad=a.ajax(a.extend({},p.ajax,{url:p.href,error:function(q,r){if(e.coming&&r!=="abort"){e._error("ajax",q)}else{e.hideLoading()}},success:function(q,r){if(r==="success"){p.content=q;e._afterLoad()}}}))},_loadIframe:function(){var p=e.coming,q=a(p.tpl.iframe.replace(/\{rnd\}/g,new Date().getTime())).attr("scrolling",l?"auto":p.iframe.scrolling).attr("src",p.href);a(p.wrap).bind("onReset",function(){try{a(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(r){}});if(p.iframe.preload){e.showLoading();q.one("load",function(){a(this).data("ready",1);if(!l){a(this).bind("load.fb",e.update)}a(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();e._afterLoad()})}p.content=q.appendTo(p.inner);if(!p.iframe.preload){e._afterLoad()}},_preloadImages:function(){var r=e.group,q=e.current,u=r.length,p=q.preload?Math.min(q.preload,u-1):0,t,s;for(s=1;s<=p;s+=1){t=r[(q.index+s)%u];if(t.type==="image"&&t.href){new Image().src=t.href}}},_afterLoad:function(){var p=e.coming,v=e.current,u="fancybox-placeholder",r,q,x,w,t,s;e.hideLoading();if(!p||e.isActive===false){return}if(false===e.trigger("afterLoad",p,v)){p.wrap.stop(true).trigger("onReset").remove();e.coming=null;return}if(v){e.trigger("beforeChange",v);v.wrap.stop(true).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()}e.unbindEvents();r=p;q=p.content;x=p.type;w=p.scrolling;a.extend(e,{wrap:r.wrap,skin:r.skin,outer:r.outer,inner:r.inner,current:r,previous:v});t=r.href;switch(x){case"inline":case"ajax":case"html":if(r.selector){q=a("<div>").html(q).find(r.selector)}else{if(i(q)){if(!q.data(u)){q.data(u,a('<div class="'+u+'"></div>').insertAfter(q).hide())}q=q.show().detach();r.wrap.bind("onReset",function(){if(a(this).find(q).length){q.hide().replaceAll(q.data(u)).data(u,false)}})}}break;case"image":q=r.tpl.image.replace("{href}",t);break;case"swf":q='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+t+'"></param>';s="";a.each(r.swf,function(y,z){q+='<param name="'+y+'" value="'+z+'"></param>';s+=" "+y+'="'+z+'"'});q+='<embed src="'+t+'" type="application/x-shockwave-flash" width="100%" height="100%"'+s+"></embed></object>";break}if(!(i(q)&&q.parent().is(r.inner))){r.inner.append(q)}e.trigger("beforeShow");r.inner.css("overflow",w==="yes"?"scroll":(w==="no"?"hidden":w));e._setDimension();e.reposition();e.isOpen=false;e.coming=null;e.bindEvents();if(!e.isOpened){a(".fancybox-wrap").not(r.wrap).stop(true).trigger("onReset").remove()}else{if(v.prevMethod){e.transitions[v.prevMethod]()}}e.transitions[e.isOpened?r.nextMethod:r.openMethod]();e._preloadImages()},_setDimension:function(){var R=e.getViewport(),Q=0,r=false,q=false,W=e.wrap,P=e.skin,A=e.inner,s=e.current,S=s.width,u=s.height,H=s.minWidth,G=s.minHeight,E=s.maxWidth,C=s.maxHeight,N=s.scrolling,O=s.scrollOutside?s.scrollbarWidth:0,B=s.margin,U=f(B[1]+B[3]),w=f(B[0]+B[2]),V,x,X,y,L,I,K,J,M,T,v,F,D,z,p;W.add(P).add(A).width("auto").height("auto").removeClass("fancybox-tmp");V=f(P.outerWidth(true)-P.width());x=f(P.outerHeight(true)-P.height());X=U+V;y=w+x;L=h(S)?(R.w-X)*f(S)/100:S;I=h(u)?(R.h-y)*f(u)/100:u;if(s.type==="iframe"){z=s.content;if(s.autoHeight&&z.data("ready")===1){try{if(z[0].contentWindow.document.location){A.width(L).height(9999);p=z.contents().find("body");if(O){p.css("overflow-x","hidden")}I=p.height()}}catch(t){}}}else{if(s.autoWidth||s.autoHeight){A.addClass("fancybox-tmp");if(!s.autoWidth){A.width(L)}if(!s.autoHeight){A.height(I)}if(s.autoWidth){L=A.width()}if(s.autoHeight){I=A.height()}A.removeClass("fancybox-tmp")}}S=f(L);u=f(I);M=L/I;H=f(h(H)?f(H,"w")-X:H);E=f(h(E)?f(E,"w")-X:E);G=f(h(G)?f(G,"h")-y:G);C=f(h(C)?f(C,"h")-y:C);K=E;J=C;if(s.fitToView){E=Math.min(R.w-X,E);C=Math.min(R.h-y,C)}F=R.w-U;D=R.h-w;if(s.aspectRatio){if(S>E){S=E;u=f(S/M)}if(u>C){u=C;S=f(u*M)}if(S<H){S=H;u=f(S/M)}if(u<G){u=G;S=f(u*M)}}else{S=Math.max(H,Math.min(S,E));if(s.autoHeight&&s.type!=="iframe"){A.width(S);u=A.height()}u=Math.max(G,Math.min(u,C))}if(s.fitToView){A.width(S).height(u);W.width(S+V);T=W.width();v=W.height();if(s.aspectRatio){while((T>F||v>D)&&S>H&&u>G){if(Q++>19){break}u=Math.max(G,Math.min(C,u-10));S=f(u*M);if(S<H){S=H;u=f(S/M)}if(S>E){S=E;u=f(S/M)}A.width(S).height(u);W.width(S+V);T=W.width();v=W.height()}}else{S=Math.max(H,Math.min(S,S-(T-F)));u=Math.max(G,Math.min(u,u-(v-D)))}}if(O&&N==="auto"&&u<I&&(S+V+O)<F){S+=O}A.width(S).height(u);W.width(S+V);T=W.width();v=W.height();r=(T>F||v>D)&&S>H&&u>G;q=s.aspectRatio?(S<K&&u<J&&S<L&&u<I):((S<K||u<J)&&(S<L||u<I));a.extend(s,{dim:{width:g(T),height:g(v)},origWidth:L,origHeight:I,canShrink:r,canExpand:q,wPadding:V,hPadding:x,wrapSpace:v-P.outerHeight(true),skinSpace:P.height()-u});if(!z&&s.autoHeight&&u>G&&u<C&&!q){A.height("auto")}},_getPosition:function(s){var p=e.current,u=e.getViewport(),r=p.margin,v=e.wrap.width()+r[1]+r[3],q=e.wrap.height()+r[0]+r[2],t={position:"absolute",top:r[0],left:r[3]};if(p.autoCenter&&p.fixed&&!s&&q<=u.h&&v<=u.w){t.position="fixed"}else{if(!p.locked){t.top+=u.y;t.left+=u.x}}t.top=g(Math.max(t.top,t.top+((u.h-q)*p.topRatio)));t.left=g(Math.max(t.left,t.left+((u.w-v)*p.leftRatio)));return t},_afterZoomIn:function(){var p=e.current;if(!p){return}e.isOpen=e.isOpened=true;e.wrap.css("overflow","visible").addClass("fancybox-opened");e.update();if(p.closeClick||(p.nextClick&&e.group.length>1)){e.inner.css("cursor","pointer").bind("click.fb",function(q){if(!a(q.target).is("a")&&!a(q.target).parent().is("a")){q.preventDefault();e[p.closeClick?"close":"next"]()}})}if(p.closeBtn){a(p.tpl.closeBtn).appendTo(e.skin).bind(l?"touchstart.fb":"click.fb",function(q){q.preventDefault();e.close()})}if(p.arrows&&e.group.length>1){if(p.loop||p.index>0){a(p.tpl.prev).appendTo(e.outer).bind("click.fb",e.prev)}if(p.loop||p.index<e.group.length-1){a(p.tpl.next).appendTo(e.outer).bind("click.fb",e.next)}}e.trigger("afterShow");if(!p.loop&&p.index===p.group.length-1){e.play(false)}else{if(e.opts.autoPlay&&!e.player.isActive){e.opts.autoPlay=false;e.play()}}},_afterZoomOut:function(p){p=p||e.current;a(".fancybox-wrap").trigger("onReset").remove();a.extend(e,{group:{},opts:{},router:false,current:null,isActive:false,isOpened:false,isOpen:false,isClosing:false,wrap:null,skin:null,outer:null,inner:null});e.trigger("afterClose",p)}});e.transitions={getOrigPosition:function(){var p=e.current,q=p.element,t=p.orig,u={},w=50,r=50,s=p.hPadding,x=p.wPadding,v=e.getViewport();if(!t&&p.isDom&&q.is(":visible")){t=q.find("img:first");if(!t.length){t=q}}if(i(t)){u=t.offset();if(t.is("img")){w=t.outerWidth();r=t.outerHeight()}}else{u.top=v.y+(v.h-r)*p.topRatio;u.left=v.x+(v.w-w)*p.leftRatio}if(e.wrap.css("position")==="fixed"||p.locked){u.top-=v.y;u.left-=v.x}u={top:g(u.top-s*p.topRatio),left:g(u.left-x*p.leftRatio),width:g(w+x),height:g(r+s)};return u},step:function(r,q){var u,s,w,t=q.prop,p=e.current,x=p.wrapSpace,v=p.skinSpace;if(t==="width"||t==="height"){u=q.end===q.start?1:(r-q.start)/(q.end-q.start);if(e.isClosing){u=1-u}s=t==="width"?p.wPadding:p.hPadding;w=r-s;e.skin[t](f(t==="width"?w:w-(x*u)));e.inner[t](f(t==="width"?w:w-(x*u)-(v*u)))}},zoomIn:function(){var p=e.current,t=p.pos,q=p.openEffect,r=q==="elastic",s=a.extend({opacity:1},t);delete s.position;if(r){t=this.getOrigPosition();if(p.openOpacity){t.opacity=0.1}}else{if(q==="fade"){t.opacity=0.1}}e.wrap.css(t).animate(s,{duration:q==="none"?0:p.openSpeed,easing:p.openEasing,step:r?this.step:null,complete:e._afterZoomIn})},zoomOut:function(){var p=e.current,q=p.closeEffect,r=q==="elastic",s={opacity:0.1};if(r){s=this.getOrigPosition();if(p.closeOpacity){s.opacity=0.1}}e.wrap.animate(s,{duration:q==="none"?0:p.closeSpeed,easing:p.closeEasing,step:r?this.step:null,complete:e._afterZoomOut})},changeIn:function(){var p=e.current,s=p.nextEffect,v=p.pos,t={opacity:1},q=e.direction,r=200,u;v.opacity=0.1;if(s==="elastic"){u=q==="down"||q==="up"?"top":"left";if(q==="down"||q==="right"){v[u]=g(f(v[u])-r);t[u]="+="+r+"px"}else{v[u]=g(f(v[u])+r);t[u]="-="+r+"px"}}if(s==="none"){e._afterZoomIn()}else{e.wrap.css(v).animate(t,{duration:p.nextSpeed,easing:p.nextEasing,complete:function(){setTimeout(e._afterZoomIn,20)}})}},changeOut:function(){var t=e.previous,r=t.prevEffect,s={opacity:0.1},p=e.direction,q=200;if(r==="elastic"){s[p==="down"||p==="up"?"top":"left"]=(p==="up"||p==="left"?"-":"+")+"="+q+"px"}t.wrap.animate(s,{duration:r==="none"?0:t.prevSpeed,easing:t.prevEasing,complete:function(){a(this).trigger("onReset").remove()}})}};e.helpers.overlay={defaults:{closeClick:true,speedOut:200,showEarly:true,css:{},locked:!l,fixed:true},overlay:null,fixed:false,create:function(p){p=a.extend({},this.defaults,p);if(this.overlay){this.close()}this.overlay=a('<div class="fancybox-overlay"></div>').appendTo("body");this.fixed=false;if(p.fixed&&e.defaults.fixed){this.overlay.addClass("fancybox-overlay-fixed");this.fixed=true}},open:function(p){var q=this;p=a.extend({},this.defaults,p);if(this.overlay){this.overlay.unbind(".overlay").width("auto").height("auto")}else{this.create(p)}if(!this.fixed){n.bind("resize.overlay",a.proxy(this.update,this));this.update()}if(p.closeClick){this.overlay.bind("click.overlay",function(r){if(a(r.target).hasClass("fancybox-overlay")){if(e.isActive){e.close()}else{q.close()}}})}this.overlay.css(p.css).show()},close:function(){a(".fancybox-overlay").remove();n.unbind("resize.overlay");this.overlay=null;if(this.margin!==false){a("body").css("margin-right",this.margin);this.margin=false}if(this.el){this.el.removeClass("fancybox-lock")}},update:function(){var q="100%",p;this.overlay.width(q).height("100%");if(a.browser.msie){p=Math.max(d.documentElement.offsetWidth,d.body.offsetWidth);if(b.width()>p){q=b.width()}}else{if(b.width()>n.width()){q=b.width()}}this.overlay.width(q).height(b.height())},onReady:function(q,p){a(".fancybox-overlay").stop(true,true);if(!this.overlay){this.margin=b.height()>n.height()||a("body").css("overflow-y")==="scroll"?a("body").css("margin-right"):false;this.el=d.all&&!d.querySelector?a("html"):a("body");this.create(q)}if(q.locked&&this.fixed){p.locked=this.overlay.append(p.wrap);p.fixed=false}if(q.showEarly===true){this.beforeShow.apply(this,arguments)}},beforeShow:function(q,p){if(p.locked){this.el.addClass("fancybox-lock");if(this.margin!==false){a("body").css("margin-right",f(this.margin)+p.scrollbarWidth)}}this.open(q)},onUpdate:function(){if(!this.fixed){this.update()}},afterClose:function(p){if(this.overlay&&!e.isActive){this.overlay.fadeOut(p.speedOut,a.proxy(this.close,this))}}};e.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(q){var p=e.current,s=p.title,u=q.type,t,r;if(a.isFunction(s)){s=s.call(p.element,p)}if(!k(s)||a.trim(s)===""){return}t=a('<div class="fancybox-title fancybox-title-'+u+'-wrap">'+s+"</div>");switch(u){case"inside":r=e.skin;break;case"outside":r=e.wrap;break;case"over":r=e.inner;break;default:r=e.skin;t.appendTo("body");if(a.browser.msie){t.width(t.width())}t.wrapInner('<span class="child"></span>');e.current.margin[2]+=Math.abs(f(t.css("margin-bottom")));break}t[(q.position==="top"?"prependTo":"appendTo")](r)}};a.fn.fancybox=function(q){var p,t=a(this),s=this.selector||"",r=function(u){var y=a(this).blur(),v=p,w,x;if(!(u.ctrlKey||u.altKey||u.shiftKey||u.metaKey)&&!y.is(".fancybox-wrap")){w=q.groupAttr||"data-fancybox-group";x=y.attr(w);if(!x){w="rel";x=y.get(0)[w]}if(x&&x!==""&&x!=="nofollow"){y=s.length?a(s):t;y=y.filter("["+w+'="'+x+'"]');v=y.index(this)}q.index=v;if(e.open(y,q)!==false){u.preventDefault()}}};q=q||{};p=q.index||0;if(!s||q.live===false){t.unbind("click.fb-start").bind("click.fb-start",r)}else{b.undelegate(s,"click.fb-start").delegate(s+":not('.fancybox-item, .fancybox-nav')","click.fb-start",r)}this.filter("[data-fancybox-start=1]").trigger("click");return this};b.ready(function(){if(a.scrollbarWidth===m){a.scrollbarWidth=function(){var q=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),p=q.children(),r=p.innerWidth()-p.height(99).innerWidth();q.remove();return r}}if(a.support.fixedPosition===m){a.support.fixedPosition=(function(){var p=a('<div style="position:fixed;top:20px;"></div>').appendTo("body"),q=(p[0].offsetTop===20||p[0].offsetTop===15);p.remove();return q}())}a.extend(e.defaults,{scrollbarWidth:a.scrollbarWidth(),fixed:a.support.fixedPosition,parent:a("body")})})}(window,document,jQuery));